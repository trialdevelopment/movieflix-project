!function(){"use strict";function e(e,t,o){t.otherwise(""),e.state("signin",{url:"",templateUrl:"app/views/signin.tmpl.html",controller:"UserController",controllerAs:"userVm"}).state("movies",{url:"/movies",templateUrl:"app/views/movies.tmpl.html",controller:"MovieController",controllerAs:"movieVm"}).state("movie-details",{url:"/movie-details/:title",templateUrl:"app/views/movie-details.tmpl.html",controller:"MovieDetailController",controllerAs:"movieDetailVm"}),o.setOptions({delay:1200,startTop:20,startRight:10,verticalSpacing:20,horizontalSpacing:20,positionX:"center",positionY:"top"})}angular.module("movie-flix",["ui.router","ui.bootstrap","angularMoment","ngStorage","ngMessages","ngAnimate","ui-notification"]).config(e),e.$inject=["$stateProvider","$urlRouterProvider","NotificationProvider"]}(),function(){"use strict";function e(e,t,o){function n(t,n){return e.get(o.API_END_POINT+"/users/"+t+"/"+n).then(r,s)}function i(t){return e.post(o.API_END_POINT+"/users/",t).then(r,s)}function r(e){return e.data}function s(e){return t.reject(e.status)}var u=this;u.signIn=n,u.signUp=i}angular.module("movie-flix").service("userService",e),e.$inject=["$http","$q","CONFIG"]}(),function(){"use strict";function e(e,t,o){function n(){return e.get(o.API_END_POINT+"/movies").then(a,c)}function i(t){return e["delete"](o.API_END_POINT+"/movies/"+t).then(a,c)}function r(t,n){return e.put(o.API_END_POINT+"/movies/"+t,n).then(a,c)}function s(t){return e.get(o.API_END_POINT+"/movies/"+t).then(a,c)}function u(t,n){return e.put(o.API_END_POINT+"/movies/"+t+"/"+n).then(a,c)}function l(t){return e.post(o.API_END_POINT+"/movies/",t).then(a,c)}function a(e){return e.data}function c(e){return t.reject(e.status)}var m=this;m.getMovies=n,m.deleteMovie=i,m.updateMovie=r,m.addMovie=l,m.getMovie=s,m.updateRating=u}angular.module("movie-flix").service("movieService",e),e.$inject=["$http","$q","CONFIG"]}(),function(){"use strict";function e(e,t,o){function n(){return e.get(o.API_END_POINT+"/comments").then(r,s)}function i(t){return e.post(o.API_END_POINT+"/comments/",t).then(r,s)}function r(e){return e.data}function s(e){return t.reject(e.status)}var u=this;u.getComments=n,u.addComment=i}angular.module("movie-flix").service("commentService",e),e.$inject=["$http","$q","CONFIG"]}(),function(){"use strict";function e(e,t,o,n,i){function r(e){e&&t.signIn(u.email,u.password).then(function(e){u.$storage=n.$default({user:e}),o.go("movies"),i.success("Login Successful..")},function(e){u.userNotFound=!0,i.error("INVALID!")})}function s(e){e&&(u.newUser.role="USER",t.signUp(u.newUser).then(function(e){u.newUser=null,u.$storage=n.$default({user:e}),o.go("movies"),i.success("Sign-up Successful..")},function(e){u.userAlreadyExists=!0,i.error("Sign-up Failed..")}))}var u=this;e.signOutFlag=!1,u.userNotFound=!1,u.userAlreadyExists=!1,u.signIn=r,u.signUp=s,delete n.user}angular.module("movie-flix").controller("UserController",e),e.$inject=["$rootScope","userService","$state","$sessionStorage","Notification"]}(),function(){"use strict";function e(e,t,o,n,i,r){function s(){null==g.user?o.go("signin"):u()}function u(){t.getMovies().then(function(e){g.movies=e,g.length=e.length,g.currentPage=1,l()},function(e){console.log(e)})}function l(){"ADMIN"===g.user.role&&(g.deleteFlag=!0,g.addFlag=!0,g.updateFlag=!0,g.itemsPerPage=7)}function a(){1==g.currentPage?"ADMIN"===g.user.role&&(g.addFlag=!0,g.itemsPerPage=7):(g.itemsPerPage=8,g.addFlag=!1)}function c(e){g.sortKey=e,g.reverse=!1}function m(){g.reverse=!g.reverse}function d(e){var t=i.open({templateUrl:"app/views/delete-movie.tmpl.html",controller:"ModalController as modalVm",resolve:{movie:function(){return e},title:function(){return"Delete Movie"},btnTxt:function(){return"Delete"}}});t.result.then(function(){u()})}function v(e){var t=i.open({templateUrl:"app/views/update-movie.tmpl.html",controller:"ModalController as modalVm",resolve:{movie:function(){return e},title:function(){return"Update Movie"},btnTxt:function(){return"Update"}}});t.result.then(function(){u()})}function f(e){var t=i.open({templateUrl:"app/views/update-movie.tmpl.html",controller:"ModalController as modalVm",resolve:{movie:function(){return e},title:function(){return"Add a Movie"},btnTxt:function(){return"Add"}}});t.result.then(function(){u()})}var g=this;e.signOutFlag=!0,g.sort=c,g.sortOrderChange=m,g.user=n.user,g.loginCheck=s,g.itemsPerPage=8,g.pageChanged=a,g.deleteFlag=!1,g.updateFlag=!1,g.addFlag=!1,g.showModal=!1,g.showAdminPriveleges=l,g.deleteMovie=d,g.updateMovie=v,g.addMovie=f,s()}angular.module("movie-flix").controller("MovieController",e),e.$inject=["$rootScope","movieService","$state","$sessionStorage","$uibModal","Notification"]}(),function(){"use strict";function e(e,t,o,n,i,r,s){function u(){null==v.user?t.go("signin"):l()}function l(){n.getMovie(v.title).then(function(e){v.movie=e,a()},function(e){console.log(e),t.go("movies"),s.error("Movie Not Found")})}function a(){i.getComments().then(function(e){v.comments=e},function(e){s.error("Error..!"),console.log(e)})}function c(){v.newComment.movie=v.movie,v.newComment.user=v.user,v.newComment.timestamp=new Date,i.addComment(v.newComment).then(function(e){s.success("Comment Added Successfully.."),v.newComment=null,a()},function(e){s.error("Error..!"),console.log(e)})}function m(){n.updateRating(v.movie.movieID,v.movie.rating).then(function(e){s.success("Rating Recorded Successfully.."),a(),t.reload()},function(e){s.error("Error..!"),console.log(e)})}function d(){v.commentsFlag=!v.commentsFlag}var v=this;e.signOutFlag=!0,v.title=o.title,v.user=r.user,v.updateRating=m,v.commentsFlag=!0,v.showComments=d,v.addComment=c,u()}angular.module("movie-flix").controller("MovieDetailController",e),e.$inject=["$rootScope","$state","$stateParams","movieService","commentService","$sessionStorage","Notification"]}(),function(){"use strict";function e(e,t,o,n,i,r,s){function u(){null!=f.movie&&(f.movie.released=new Date(f.movie.released))}function l(){f.movie.released=null}function a(){f.popup.opened=!0}function c(){i.deleteMovie(f.movie.movieID).then(function(e){s.success("Movie Deleted.."),v()},function(e){f.movieNotFound=!0,s.error("Not Found!")})}function m(e){e&&(f.movie.released=r("date")(f.movie.released,"dd MMM yyyy"),"Update"==f.btnTxt?i.updateMovie(f.movie.movieID,f.movie).then(function(e){s.success("Movie Updated.."),v()},function(e){console.log(e),404==e?(f.movieNotFound=!0,s.error("Not Found!")):(f.movieAlreadyExists=!0,s.error("Already Exists!"))}):i.addMovie(f.movie).then(function(e){s.success("Movie Added Successfully.."),v()},function(e){s.error("Already Exists!"),f.movieAlreadyExists=!0}))}function d(e){e&&(f.movie.released=r("date")(f.movie.released,"dd MMM yyyy"),i.addMovie(f.movie).then(function(e){s.success("Movie Added Successfully.."),v()},function(e){f.movieAlreadyExists=!0,s.error("Already Exists")}))}function v(){e.close()}var f=this;f.movie=t,f.title=o,f.btnTxt=n,f.close=v,f.movieAlreadyExists=!1,f.movieNotFound=!1,f.format="dd MMM yyyy",f.altInputFormats=["M!/d!/yyyy"],f.deleteMovie=c,f.updateMovie=m,f.addMovie=d,f.clear=l,f.open=a,f.popup={opened:!1},f.dateOptions={dateDisabled:!1,formatYear:"yyyy",maxDate:new Date(2026,5,22),minDate:new Date(1700,5,22),startingDay:1,showWeeks:!1},u()}angular.module("movie-flix").controller("ModalController",e),e.$inject=["$uibModalInstance","movie","title","btnTxt","movieService","$filter","Notification"]}(),function(){"use strict";function e(e,t,o,n){function i(){o.go("movies")}function r(){delete t.user,o.go("signin"),n.success("Logged Out..")}var s=this;e.signOutFlag=!1,s.signOut=r,s.home=i}angular.module("movie-flix").controller("HeaderController",e),e.$inject=["$rootScope","$sessionStorage","$state","Notification"]}(),function(){"use strict";angular.module("movie-flix").constant("CONFIG",{API_END_POINT:"http://localhost:8080/movieflix/api"})}();